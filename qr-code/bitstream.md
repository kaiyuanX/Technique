The best coding rule for bitstream length.

在方括号中的字符数如[5,7,9]分别用于版本 1~9，10~26 和版本 27~40。
1. 选择初始模式
    * 如果初始输入数据是在 8 位字节的二进制字符的专有子集中，选择 8 位字节模式；
    * 如果初始输入数据是在字母数字字符集的专有子集中，并且如果字符个数少于[6,7,8]，其后紧跟 8 位字节专有子集中的数据，那么选择 8 位字节模式，否则选择字母数据模式；
    * 如果初始数据是数字，并且如果数字个数少于[4,4,5]，其后紧跟 8 位字节字符集专有子集中的数据，那么选择 8 位字节模式，否则如果少于[6,7,8]后随字母数字字符集的专有子集中的数据，那么选择字母数字模式，否则选择数字模式。
2. 在 8 位字节模式中
    * 如果有不少于[6,8,9]的数字字符序列出现在来自 8 位字节二进制字符集的专有子集的多个数据前，那么转至数字模式；
    * 如果有字母数字字符集的专有子集的不少于[11,15,16]的字符序列出现在来自 8 位字节二进制字符集的专有子集的数据前，那么转至字母数字模式。
3. 在字母数字模式中
    * 如果有 8 位字节字符集的专有子集的一个或多个字符出现，转至 8 位字节模式；
    * 如果有不少于[13,15,17]的数字字符数据序列在来自字母数字字符集的专有子集的数据前出现，转至数字模式。
4. 在数字模式中
    * 如果有一个或多个来自 8 位字节的专有子集中的字符出现，转至 8 位字节模式；
    * 如果有一个或多个字母数字的专有子集中的字符出现，转至字母数字模式。

> 编者注：上述规则摘抄至 GB/T 18284-2000，最后一句是有问题或者不完善的。如果在数字模式中出现字符`Aabcd`，因为`A`属于字母数字字符集，而`abcd`只属于 8 位字节字符集。此时按最后一句话，需先转换为字母数字模式，加入字符`A`，然后马上又转换为 8 位字节模式。很显然，这样做浪费了空间。由于字母数字字符集是 8 位字节字符集的子集，正确的做法应当是转换为 8 位字节模式，然后加入字符`Aabcd`。

例：数据`123456ABC123`，QR 码版本号 1：
1. 根据编码规则，首先应选择数字模式作为初始模式：0001
2. 加入字符计数指示符：6 -> 0000000110
3. 加入 123 编码：123 -> 0001111011
4. 加入 456 编码：456 -> 0111001000
5. 根据编码规则，转换为字母数字模式：0010
6. 加入字符计数指示符：6 -> 000000110
7. 加入 AB 编码：(10,11) -> 10×45+11=461 -> 00111001101
8. 加入 C1 编码：(12,1) -> 12×45+1=541 -> 01000011101
9. 加入 23 编码：(2,3) -> 2×45+3=93 -> 00001011101

将以上生成的二进制数据从上至下连接，生成最终位流。